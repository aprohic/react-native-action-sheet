var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _objectSpread2=_interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf3=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _react=_interopRequireDefault(require("react"));var _reactNative=require("react-native");var _jsxFileName="/Users/ahmed/work/misc/react-native-action-sheet/src/ActionSheet.js";var Expo_ActionSheetIOS=function(_React$Component){(0,_inherits2.default)(Expo_ActionSheetIOS,_React$Component);function Expo_ActionSheetIOS(){(0,_classCallCheck2.default)(this,Expo_ActionSheetIOS);return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf3.default)(Expo_ActionSheetIOS).apply(this,arguments));}(0,_createClass2.default)(Expo_ActionSheetIOS,[{key:"render",value:function render(){return _react.default.createElement(_reactNative.View,{style:{flex:1},__source:{fileName:_jsxFileName,lineNumber:7}},_react.default.Children.only(this.props.children));}},{key:"showActionSheetWithOptions",value:function showActionSheetWithOptions(options,onSelect){var iosOptions=(0,_objectSpread2.default)({},options,{title:options.title||undefined,message:options.message||undefined,icons:undefined});_reactNative.ActionSheetIOS.showActionSheetWithOptions(iosOptions,onSelect);}}]);return Expo_ActionSheetIOS;}(_react.default.Component);var OPACITY_ANIMATION_IN_TIME=225;var OPACITY_ANIMATION_OUT_TIME=195;var EASING_OUT=Easing.bezier(0.25,0.46,0.45,0.94);var EASING_IN=Easing.out(EASING_OUT);var BLACK_54PC_TRANSPARENT='#0000008a';var BLACK_87PC_TRANSPARENT='#000000de';var DESTRUCTIVE_COLOR='#d32f2f';var ActionGroup=function(_React$Component2){(0,_inherits2.default)(ActionGroup,_React$Component2);function ActionGroup(){(0,_classCallCheck2.default)(this,ActionGroup);return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf3.default)(ActionGroup).apply(this,arguments));}(0,_createClass2.default)(ActionGroup,[{key:"render",value:function render(){var _this=this;var _this$props=this.props,options=_this$props.options,icons=_this$props.icons,tintIcons=_this$props.tintIcons,destructiveButtonIndex=_this$props.destructiveButtonIndex,onSelect=_this$props.onSelect,startIndex=_this$props.startIndex,length=_this$props.length,textStyle=_this$props.textStyle,tintColor=_this$props.tintColor,showSeparators=_this$props.showSeparators;var optionViews=[];var nativeFeedbackBackground=TouchableNativeFeedbackSafe.Ripple('rgba(180, 180, 180, 1)',false);var _loop=function _loop(_i){var defaultColor=tintColor?tintColor:(textStyle||{}).color||BLACK_87PC_TRANSPARENT;var color=_i===destructiveButtonIndex?DESTRUCTIVE_COLOR:defaultColor;var iconSource=icons!=null&&icons[_i];var iconElement=undefined;if(iconSource){if(typeof iconSource==='number'){var iconStyle=[styles.icon,{tintColor:tintIcons?color:null}];iconElement=_react.default.createElement(Image,{fadeDuration:0,source:iconSource,resizeMode:"contain",style:iconStyle,__source:{fileName:_jsxFileName,lineNumber:115}});}else{iconElement=_react.default.createElement(_reactNative.View,{style:styles.icon,__source:{fileName:_jsxFileName,lineNumber:121}},iconSource);}}optionViews.push(_react.default.createElement(TouchableNativeFeedbackSafe,{key:_i,pressInDelay:0,background:nativeFeedbackBackground,onPress:function onPress(){return onSelect(_i);},style:styles.button,__source:{fileName:_jsxFileName,lineNumber:126}},iconElement,_react.default.createElement(Text,{style:[styles.text,textStyle,{color:color}],__source:{fileName:_jsxFileName,lineNumber:133}},options[_i])));if(showSeparators&&_i<startIndex+length-1){optionViews.push(_this._renderRowSeparator(_i));}};for(var _i=startIndex;_i<startIndex+length;_i++){_loop(_i);}return _react.default.createElement(_reactNative.View,{style:styles.groupContainer,__source:{fileName:_jsxFileName,lineNumber:143}},this._renderTitleContent(),_react.default.createElement(_reactNative.ScrollView,{__source:{fileName:_jsxFileName,lineNumber:145}},optionViews));}},{key:"_renderRowSeparator",value:function _renderRowSeparator(key){return _react.default.createElement(_reactNative.View,{key:key?"separator-"+key:null,style:[styles.rowSeparator,this.props.separatorStyle],__source:{fileName:_jsxFileName,lineNumber:151}});}},{key:"_renderTitleContent",value:function _renderTitleContent(){var _this$props2=this.props,title=_this$props2.title,titleTextStyle=_this$props2.titleTextStyle,message=_this$props2.message,messageTextStyle=_this$props2.messageTextStyle,showSeparators=_this$props2.showSeparators;if(!title&&!message){return null;}return _react.default.createElement(_reactNative.View,{__source:{fileName:_jsxFileName,lineNumber:162}},_react.default.createElement(_reactNative.View,{style:[styles.titleContainer,{paddingBottom:showSeparators?24:16}],__source:{fileName:_jsxFileName,lineNumber:163}},!!title&&_react.default.createElement(Text,{style:[styles.title,titleTextStyle],__source:{fileName:_jsxFileName,lineNumber:164}},title),!!message&&_react.default.createElement(Text,{style:[styles.message,messageTextStyle],__source:{fileName:_jsxFileName,lineNumber:165}},message)),!!showSeparators&&this._renderRowSeparator('title'));}}]);return ActionGroup;}(_react.default.Component);ActionGroup.propTypes={options:PropTypes.array.isRequired,icons:PropTypes.array,tintIcons:PropTypes.bool,destructiveButtonIndex:PropTypes.number,onSelect:PropTypes.func.isRequired,startIndex:PropTypes.number.isRequired,length:PropTypes.number.isRequired,textStyle:Text.propTypes.style,tintColor:PropTypes.string,title:PropTypes.string,titleTextStyle:Text.propTypes.style,message:PropTypes.string,messageTextStyle:Text.propTypes.style,showSeparators:PropTypes.bool,separatorStyle:PropTypes.object};ActionGroup.defaultProps={title:null,message:null,showSeparators:false,tintIcons:true,textStyle:{}};var ActionSheetAndroid=function(_React$Component3){(0,_inherits2.default)(ActionSheetAndroid,_React$Component3);function ActionSheetAndroid(){var _getPrototypeOf2;var _this2;(0,_classCallCheck2.default)(this,ActionSheetAndroid);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this2=(0,_possibleConstructorReturn2.default)(this,(_getPrototypeOf2=(0,_getPrototypeOf3.default)(ActionSheetAndroid)).call.apply(_getPrototypeOf2,[this].concat(args)));_this2._actionSheetHeight=360;_this2._animateOutCallback=null;_this2.state={isVisible:false,isAnimating:false,options:null,onSelect:null,overlayOpacity:new Animated.Value(0),sheetOpacity:new Animated.Value(0)};_this2._setActionSheetHeight=function(_ref){var nativeEvent=_ref.nativeEvent;return _this2._actionSheetHeight=nativeEvent.layout.height;};_this2._selectCancelButton=function(){var options=_this2.state.options;if(!options){return false;}if(typeof options.cancelButtonIndex==='number'){return _this2._onSelect(options.cancelButtonIndex);}else{return _this2._animateOut();}};_this2._onSelect=function(index){var _this2$state=_this2.state,isAnimating=_this2$state.isAnimating,onSelect=_this2$state.onSelect;if(isAnimating){return false;}onSelect&&onSelect(index);return _this2._animateOut();};_this2._animateOut=function(){var _this2$state2=_this2.state,isAnimating=_this2$state2.isAnimating,overlayOpacity=_this2$state2.overlayOpacity,sheetOpacity=_this2$state2.sheetOpacity;if(isAnimating){return false;}BackHandler.removeEventListener('actionSheetHardwareBackPress',_this2._selectCancelButton);_this2.setState({isAnimating:true});Animated.parallel([Animated.timing(overlayOpacity,{toValue:0,easing:EASING_IN,duration:OPACITY_ANIMATION_OUT_TIME,useNativeDriver:_this2.props.useNativeDriver}),Animated.timing(sheetOpacity,{toValue:0,easing:EASING_IN,duration:OPACITY_ANIMATION_OUT_TIME,useNativeDriver:_this2.props.useNativeDriver})]).start(function(result){if(result.finished){_this2.setState({isVisible:false,isAnimating:false});if(typeof _this2._animateOutCallback==='function'){_this2._animateOutCallback();_this2._animateOutCallback=null;}}});return true;};return _this2;}(0,_createClass2.default)(ActionSheetAndroid,[{key:"render",value:function render(){var _this$state=this.state,isVisible=_this$state.isVisible,overlayOpacity=_this$state.overlayOpacity;var overlay=!!isVisible&&_react.default.createElement(Animated.View,{style:[styles.overlay,{opacity:overlayOpacity}],__source:{fileName:_jsxFileName,lineNumber:221}});return _react.default.createElement(_reactNative.View,{style:{flex:1},__source:{fileName:_jsxFileName,lineNumber:232}},_react.default.Children.only(this.props.children),overlay,!!isVisible&&this._renderSheet());}},{key:"_renderSheet",value:function _renderSheet(){var _this$state2=this.state,options=_this$state2.options,isAnimating=_this$state2.isAnimating,sheetOpacity=_this$state2.sheetOpacity;if(!options){return null;}var optionsArray=options.options,icons=options.icons,tintIcons=options.tintIcons,destructiveButtonIndex=options.destructiveButtonIndex,textStyle=options.textStyle,tintColor=options.tintColor,title=options.title,titleTextStyle=options.titleTextStyle,message=options.message,messageTextStyle=options.messageTextStyle,showSeparators=options.showSeparators,separatorStyle=options.separatorStyle;return _react.default.createElement(TouchableWithoutFeedback,{onPress:this._selectCancelButton,__source:{fileName:_jsxFileName,lineNumber:263}},_react.default.createElement(Animated.View,{needsOffscreenAlphaCompositing:isAnimating,style:[styles.sheetContainer,{opacity:sheetOpacity,transform:[{translateY:sheetOpacity.interpolate({inputRange:[0,1],outputRange:[this._actionSheetHeight,0]})}]}],__source:{fileName:_jsxFileName,lineNumber:264}},_react.default.createElement(_reactNative.View,{style:styles.sheet,onLayout:this._setActionSheetHeight,__source:{fileName:_jsxFileName,lineNumber:280}},_react.default.createElement(ActionGroup,{options:optionsArray,icons:icons,tintIcons:tintIcons===undefined?true:tintIcons,destructiveButtonIndex:destructiveButtonIndex,onSelect:this._onSelect,startIndex:0,length:optionsArray.length,textStyle:textStyle||{},tintColor:tintColor,title:title||null,titleTextStyle:titleTextStyle,message:message||null,messageTextStyle:messageTextStyle,showSeparators:showSeparators,separatorStyle:separatorStyle,__source:{fileName:_jsxFileName,lineNumber:281}}))));}},{key:"showActionSheetWithOptions",value:function showActionSheetWithOptions(options,onSelect,onAnimateOut){var _this3=this;var _this$state3=this.state,isVisible=_this$state3.isVisible,overlayOpacity=_this$state3.overlayOpacity,sheetOpacity=_this$state3.sheetOpacity;if(isVisible){return;}this.setState({options:options,onSelect:onSelect,isVisible:true,isAnimating:true});overlayOpacity.setValue(0);sheetOpacity.setValue(0);Animated.parallel([Animated.timing(overlayOpacity,{toValue:0.32,easing:EASING_OUT,duration:OPACITY_ANIMATION_IN_TIME,useNativeDriver:this.props.useNativeDriver}),Animated.timing(sheetOpacity,{toValue:1,easing:EASING_OUT,duration:OPACITY_ANIMATION_IN_TIME,useNativeDriver:this.props.useNativeDriver})]).start(function(result){if(result.finished){_this3.setState({isAnimating:false});}});this._animateOutCallback=onAnimateOut;BackHandler.addEventListener('actionSheetHardwareBackPress',this._selectCancelButton);}}]);return ActionSheetAndroid;}(_react.default.Component);ActionSheet.defaultProps={useNativeDriver:true};var TouchableComponent;TouchableComponent=_reactNative.Platform.Version<=20?TouchableOpacity:TouchableNativeFeedback;if(TouchableComponent!==TouchableNativeFeedback){TouchableComponent.SelectableBackground=function(){return{};};TouchableComponent.SelectableBackgroundBorderless=function(){return{};};TouchableComponent.Ripple=function(color,borderless){return{};};}var TouchableNativeFeedbackSafe=function(_React$Component4){(0,_inherits2.default)(TouchableNativeFeedbackSafe,_React$Component4);function TouchableNativeFeedbackSafe(){(0,_classCallCheck2.default)(this,TouchableNativeFeedbackSafe);return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf3.default)(TouchableNativeFeedbackSafe).apply(this,arguments));}(0,_createClass2.default)(TouchableNativeFeedbackSafe,[{key:"render",value:function render(){if(TouchableComponent===TouchableNativeFeedback){return _react.default.createElement(TouchableComponent,(0,_extends2.default)({},this.props,{style:{},__source:{fileName:_jsxFileName,lineNumber:446}}),_react.default.createElement(_reactNative.View,{style:this.props.style,__source:{fileName:_jsxFileName,lineNumber:447}},this.props.children));}else{return _react.default.createElement(TouchableComponent,(0,_extends2.default)({},this.props,{__source:{fileName:_jsxFileName,lineNumber:451}}),this.props.children);}}}]);return TouchableNativeFeedbackSafe;}(_react.default.Component);TouchableNativeFeedbackSafe.SelectableBackground=TouchableComponent.SelectableBackground;TouchableNativeFeedbackSafe.SelectableBackgroundBorderless=TouchableComponent.SelectableBackgroundBorderless;TouchableNativeFeedbackSafe.Ripple=TouchableComponent.Ripple;var styles=StyleSheet.create({groupContainer:{backgroundColor:'#ffffff',overflow:'hidden'},button:{justifyContent:'flex-start',alignItems:'center',flexDirection:'row',height:56,paddingHorizontal:16},icon:{width:24,height:24,marginRight:32},text:{fontSize:16,color:BLACK_87PC_TRANSPARENT,textAlignVertical:'center'},rowSeparator:{backgroundColor:'#dddddd',height:1,width:'100%'},overlay:{position:'absolute',top:0,right:0,bottom:0,left:0,backgroundColor:'black'},sheetContainer:{position:'absolute',left:0,right:0,bottom:0,top:0,backgroundColor:'transparent',alignItems:'flex-end',justifyContent:'center',flexDirection:'row'},sheet:{flex:1,backgroundColor:'transparent'},titleContainer:{alignItems:'flex-start',padding:16,paddingTop:24},title:{fontSize:16,color:BLACK_54PC_TRANSPARENT,textAlignVertical:'center'},message:{marginTop:12,fontSize:14,color:BLACK_54PC_TRANSPARENT,textAlignVertical:'center'}});var _default=_reactNative.Platform.OS==='ios'?Expo_ActionSheetIOS:ActionSheetAndroid;exports.default=_default;